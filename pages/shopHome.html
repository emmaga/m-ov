<div ng-controller="shopHomeController as shopHome" ng-init="shopHome.init()" >
    <!-- 分类 -->
    <div class="bar tabs-striped tabs-top tabs-background-light tabs-color-assertive mod-fixed mod-fixed-top" style="padding: 0;">
        <div class="tabs">
            <div class="tab-item" ng-repeat="category in shopHome.categoryList track  by category.id" ng-click="shopHome.searchProductList(category.id,true)" ng-class="{active:(shopHome.searchProductId==category.id)}">
            {{category.name}}
          </div>
        </div>
    </div>
    <!--header-->
    <div class="bar bar-header bar-light mod-fixed">
        <h1 class="title">商城</h1>
        <button ui-sref="shopCart" class="button button-icon icon ion-ios-cart">
            {{shopHome.shopCartItemCount}}
        </button>
    </div>

    <div class="list mod-has-tabs-top padding">

    
        <div class="card mod-flat" ng-repeat='product in shopHome.productList' ui-sref="shopProductDetail">
            <div class="item mod-no-border">
                <div class="full-image mod-cover mod-radius mod-4x3" style="background-image: url({{product.imgSrc}});"></div>
            </div>
            <div class="item mod-no-border ">
                <h2>{{product.name}}</h2>
                <p>{{product.intro}}</p>
            <p class="item-note">库存：{{product.availableCount}}</p>
                <h2 class="mod-member-price assertive">￥{{product.price}}</h2>
            </div>
        </div>

        <a class="button button-light button-block mod-load-more" ng-click="shopHome.moreProduct()" ng-show="shopHome.productTotal>shopHome.productList.length && !shopHome.showLoadingIcon">
            显示更多商品
            <i class="ion-android-arrow-dropdown"></i>
        </a>
        <p class="mod-note-bottomline" ng-show="shopHome.productTotal==shopHome.productList.length && shopHome.productTotal!=0">
            <i class="icon ion-android-happy"></i>
            没有更多了
        </p>
        
    </div>
      
    <!-- touch hack -->
    <!-- <div class="mod-touch-hack"></div> -->


    <ion-spinner icon="dots" class="mod-spinner-list" ng-show="shopHome.showLoadingIcon"></ion-spinner>
    <br>
    <p class="mod-note-emptylist" ng-show="shopHome.productTotal==0 && shopHome.productList.length==0 && !shopHome.showLoadingIcon">
        <i class="icon ion-android-alert"></i><br>
        商品正在上架中
    </p>
    <!-- <ion-infinite-scroll
      on-infinite="shopHome.moreProduct()"
      distance="1%">
    </ion-infinite-scroll> -->
</div>
