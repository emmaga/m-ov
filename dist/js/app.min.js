/*! m-ov | cc | ISC */
"use strict";String.prototype.parseQuerystring=function(){var a={},b=this.split("&");for(var c in b){var d=b[c].split("=");a[decodeURIComponent(d[0])]=decodeURIComponent(d[1])}return a},function(){angular.module("m-ov",["ionic","ui.router","app.filters","app.controllers","app.directive","app.services","pascalprecht.translate"]).config(["$translateProvider",function(a){var b=navigator.language.indexOf("zh")>-1?"zh-CN":"en-US";a.preferredLanguage(b),a.useStaticFilesLoader({prefix:"i18n/",suffix:".json"})}]).config(["$stateProvider","$urlRouterProvider",function(a,b){b.otherwise("/index"),a.state("index",{url:"/index",templateUrl:"pages/bookHotelList.html"}).state("bookRoomList",{url:"/bookRoomList/?hotelId&checkIn&checkOut",views:{"":{templateUrl:"pages/bookRoomList.html"}}}).state("hotelInfo",{url:"/hotelInfo/?hotelId",views:{"":{templateUrl:"pages/hotelInfo.html"}}}).state("bookHotelList",{url:"/bookHotelList",views:{"":{templateUrl:"pages/bookHotelList.html"}}}).state("roomInfo",{url:"/roomInfo/?roomId&hotelId&checkIn&checkOut",views:{"":{templateUrl:"pages/roomInfo.html"}}}).state("bookOrderInfo",{url:"/bookOrderInfo/?orderId",views:{"":{templateUrl:"pages/bookOrderInfo.html"}}}).state("bookRoomSoldOut",{url:"/bookRoomSoldOut",views:{"":{templateUrl:"pages/bookRoomSoldOut.html"}}}).state("memberHome",{url:"/memberHome",views:{"":{templateUrl:"pages/memberHome.html"}}}).state("memberInfoEdit",{url:"/memberInfoEdit/?memberId",views:{"":{templateUrl:"pages/memberInfoEdit.html"}}}).state("memberOrderList",{url:"/memberOrderList",views:{"":{templateUrl:"pages/memberOrderList.html"}}}).state("shopHome",{url:"/shopHome",views:{"":{templateUrl:"pages/shopHome.html"}}}).state("shopProductDetail",{url:"/shopProductDetail",views:{"":{templateUrl:"pages/shopProductDetail.html"}}}).state("shopCart",{url:"/shopCart",views:{"":{templateUrl:"pages/shopCart.html"}}}).state("shopOrderConfirm",{url:"/shopOrderConfirm",views:{"":{templateUrl:"pages/shopOrderConfirm.html"}}}).state("shopOrderInfo",{url:"/shopOrderInfo",views:{"":{templateUrl:"pages/shopOrderInfo.html"}}})}]).constant("BACKEND_CONFIG",{serverUrl:"http://openvod.cleartv.cn/backend_wx/v1/",testUrl:"api/",testExtesion:".json",test:!0,mapUrl:"http://openvod.cleartv.cn/map/baidumap.html"})}(),function(){angular.module("app.controllers",["ngCookies"]).controller("RootController",["$scope","$window","$http","$filter","$ionicPopup","$ionicModal","$translate","backendUrl",function(a,b,c,d,e,f,g,h){var i=this;i.params={},i.init=function(){var a=b.location.search.substring(1),c=a.parseQuerystring(),d=c.code,e=c.appid;i.setParams("appid",e),i.getUserID(d,e),i.wxConfigJSSDK(),i.wxShare=function(){setTimeout(function(){wx.onMenuShareAppMessage({title:"",desc:"",link:"https://open.weixin.qq.com/connect/oauth2/authorize?appid="+i.getParams("appid")+"&redirect_uri="+encodeURIComponent(window.location.origin+window.location.pathname+window.location.hash)+"&response_type=code&scope=snsapi_userinfo&state=&component_appid=wx5bfdc86d4b702418#wechat_redirect",imgUrl:"",type:"",dataUrl:"",success:function(){},cancel:function(){}}),wx.onMenuShareTimeline({title:"",link:"https://open.weixin.qq.com/connect/oauth2/authorize?appid="+i.getParams("appid")+"&redirect_uri="+encodeURIComponent(window.location.origin+window.location.pathname+window.location.hash)+"&response_type=code&scope=snsapi_userinfo&state=&component_appid=wx5bfdc86d4b702418#wechat_redirect",imgUrl:"",success:function(){},cancel:function(){}})},1e3)},i.searchProjectInfo(),i.searchMemberInfo()},i.setParams=function(a,b){i.params[a]=b},i.getParams=function(a){return i.params[a]},i.getUserID=function(a,b){var f={appid:b,code:a};f=JSON.stringify(f),c.post(h("buildsession","","server"),f).success(function(a,b,c,d){i.getWxUserInfo(a.access_token,a.openid)}).error(function(a,b,c,f){e.alert({template:d("translate")("serverError")+b})})},i.getWxUserInfo=function(a,b){var f=g.proposedLanguage()||g.use();f="zh-CN"==f?"zh_CN":"en";var j={access_token:a,openid:b,lang:f};j=JSON.stringify(j),c.post(h("wxuserinfo","","server"),j).success(function(a,b,c,d){i.setParams("wxUserInfo",a)}).error(function(a,b,c,f){e.alert({template:d("translate")("serverError")+b})})},i.wxConfigJSSDK=function(){i.noncestr=Math.random().toString(36).substr(2),i.timestamp=(new Date).getTime()+"";var a={appid:i.getParams("appid"),noncestr:i.noncestr,timestamp:i.timestamp,url:window.location.origin+window.location.pathname+window.location.search};a=JSON.stringify(a),c.post(h("jssign","","server"),a).success(function(a,b,c,e){"200"==a.rescode?wx.config({debug:!0,appId:i.getParams("appid"),timestamp:i.timestamp,nonceStr:i.noncestr,signature:a.signature,jsApiList:["onMenuShareTimeline","onMenuShareAppMessage","chooseWXPay"]}):alert(d("translate")("serverError")+a.rescode)}).error(function(a,b,c,e){alert(d("translate")("serverError")+b)})},i.searchProjectInfo=function(){var a={action:"GetProjectInfo",appid:i.getParams("appid"),clear_session:"xxxx",openid:i.getParams("openid"),lang:g.proposedLanguage()||g.use()};a=JSON.stringify(a),c({method:d("ajaxMethod")(),url:h("project","projectInfo"),data:a}).then(function(a,b,c,d){console.log(a),i.projectInfo=a.data.data,i.setParams("projectInfo",i.projectInfo)},function(a,b,c,d){e.alert({template:b})})},i.searchMemberInfo=function(){var b={action:"GetMemberInfo",appid:a.root.getParams("appid"),clear_session:"xxxx",openid:a.root.getParams("openid"),lang:g.proposedLanguage()||g.use()};b=JSON.stringify(b),c({method:d("ajaxMethod")(),url:h("member","memberInfo"),data:b}).then(function(a,b,c,d){i.memberInfo=a.data.data.member,i.setParams("memberInfo",i.memberInfo)},function(a,b,c,d){e.alert({template:b})})},f.fromTemplateUrl("pages/mainMenu.html",{scope:a,animation:"slide-in-left"}).then(function(b){a.modal=b}),i.showMainMenu=function(){a.modal.show()}}]).controller("bookHotelListController",["$scope","$filter","$timeout","$location","$http","$stateParams","$ionicPopup","$translate","loadingService","backendUrl","util",function(a,b,c,d,e,f,g,h,i,j,k){console.log("bookHotelListController");var l=this;console.log(a.root.params),l.init=function(){a.root.wxShare(),l.showLoadingBool={},l.showLoadingBool.searchCityListsBool=!1,l.showLoadingBool.searchHotelListBool=!1,i(l.showLoadingBool),l.datePickerShow=!1,l.hotels={},l.checkin=(new Date).getTime(),l.checkout=l.checkin+864e5,l.stayDays=k.countDay(l.checkin,l.checkout),l.cityInfo={id:"0",name:"全部"},l.searchHotelList(),l.searchCityLists()},l.showDP=function(a){l.datePickerShow=!!a&&a},l.showCP=function(a){l.cityPickerShow=!!a&&a},l.doAfterPickDates=function(a,b){l.checkin=a,l.checkout=b,l.stayDays=k.countDay(l.checkin,l.checkout),c(function(){l.showDP(!1)},500),l.searchHotelList(),console.log("日期")},l.doAfterPickCity=function(a,b){l.cityInfo={id:a,name:b},l.showCP(!1),l.searchHotelList(),console.log("chengshi")},l.searchCityLists=function(){var c={action:"GetCityLists",appid:a.root.getParams("appid"),clear_session:"xxxx",openid:a.root.getParams("openid"),lang:h.proposedLanguage()||h.use()};c=JSON.stringify(c),e({method:b("ajaxMethod")(),url:j("project","cityLists"),data:c}).then(function(a,b,c,d){l.cityLists=a.data.data.cityLists,l.showLoadingBool.searchCityListsBool=!0,i(l.showLoadingBool)},function(a,b,c,d){l.showLoadingBool.searchCityListsBool=!0,i(l.showLoadingBool),g.alert({template:b})})},l.searchHotelList=function(){l.showLoadingBool.searchHotelListBool=!1,i(l.showLoadingBool);var d={action:"GetHotelList",appid:a.root.getParams("appid"),clear_session:"xxxx",openid:a.root.getParams("openid"),lang:h.proposedLanguage()||h.use(),bookCity:l.cityInfo.cityId,bookStartDate:l.checkin,bookEndDate:l.checkout};d=JSON.stringify(d),c(function(){e({method:b("ajaxMethod")(),url:j("bookHotel","hotelList"),data:d}).then(function(a,b,c,d){l.hotels=a.data.data.hotelLists,l.hotelNum=a.data.data.hotelNum,l.showLoadingBool.searchHotelListBool=!0,i(l.showLoadingBool)},function(a,b,c,d){l.showLoadingBool.searchHotelListBool=!0,i(l.showLoadingBool),g.alert({template:b})})},500)}}]).controller("bookRoomListController",["$scope","$http","$filter","$state","$stateParams","$timeout","$ionicPopup","$translate","loadingService","backendUrl","BACKEND_CONFIG","util",function(a,b,c,d,e,f,g,h,i,j,k,l){console.log("bookRoomListController");var m=this;m.init=function(){a.root.wxShare(),m.hotelId=e.hotelId,m.checkIn=e.checkIn-0,m.checkOut=e.checkOut-0,m.stayDays=l.countDay(m.checkIn,m.checkOut),m.showLoadingBool={},m.showLoadingBool.searchHotelInfoBool=!1,m.showLoadingBool.searchRoomListBool=!1,i(m.showLoadingBool),m.searchHotelInfo(),m.searchRoomList()},m.showDP=function(a){m.datePickerShow=!!a&&a},m.doAfterPickDates=function(a,b){m.checkIn=a,m.checkOut=b,m.stayDays=l.countDay(m.checkIn,m.checkOut),f(function(){m.showDP(!1)},500)},m.nextState=function(a,b,c,e,f){0!=f&&d.go("roomInfo",{roomId:a,hotelId:b,checkIn:c,checkOut:e})},m.searchHotelInfo=function(){var d={action:"GetHotelInfo",appid:a.root.getParams("appid"),clear_session:"xxxx",openid:a.root.getParams("openid"),lang:h.proposedLanguage()||h.use(),hotelId:m.hotelId};d=JSON.stringify(d),f(function(){b({method:c("ajaxMethod")(),url:j("bookHotel","hotelInfo"),data:d}).then(function(a,b,c,d){m.hotel=a.data.data.hotel,m.showLoadingBool.searchHotelInfoBool=!0,m.locationHref=k.mapUrl+"?x="+m.hotel.hotelLocation.X+"&y="+m.hotel.hotelLocation.Y,i(m.showLoadingBool),console.log("searchHotelInfoBool")},function(a,b,c,d){m.showLoadingBool.searchHotelInfoBool=!0,i(m.showLoadingBool),g.alert({template:b})})},300)},m.searchRoomList=function(){var d={action:"GetRoomList",appid:a.root.getParams("appid"),clear_session:"xxxx",openid:a.root.getParams("openid"),lang:h.proposedLanguage()||h.use(),hotelId:m.hotelId,bookStartDate:m.checkIn,bookEndDate:m.checkOut};d=JSON.stringify(d),b({method:c("ajaxMethod")(),url:j("bookHotel","roomList"),data:d}).then(function(a,b,c,d){m.rooms=a.data.data,m.showLoadingBool.searchRoomListBool=!0,i(m.showLoadingBool)},function(a,b,c,d){m.showLoadingBool.searchHotelInfoBool=!0,i(m.showLoadingBool),g.alert({template:b})})}}]).controller("hotelInfoController",["$http","$scope",function(a,b){var c=this;c.init=function(){b.root.wxShare()}}]).controller("roomInfoController",["$location","$scope","$http","$filter","$state","$translate","$stateParams","$timeout","$ionicPopup","loadingService","backendUrl","util",function(a,b,c,d,e,f,g,h,i,j,k,l){console.log("roomInfoController"),console.log(g),console.log(b.root.params);var m=this;m.init=function(){b.root.wxShare(),m.showLoadingBool={},m.showLoadingBool.searchBool=!1,j(m.showLoadingBool),m.checkIn=g.checkIn-0,m.checkOut=g.checkOut-0,m.roomId=g.roomId,m.hotelId=g.hotelId,m.stayDays=l.countDay(m.checkIn,m.checkOut),m.search(),m.memberInfo=b.root.params.memberInfo,m.memberInfo.mobile=m.memberInfo.mobile-0,m.roomNumber=1},m.search=function(){var a={action:"GetRoomInfo",appid:b.root.getParams("appid"),clear_session:"xxxx",openid:b.root.getParams("openid"),lang:f.proposedLanguage()||f.use(),roomId:m.roomId,hotelId:m.hotelId,bookStartDate:m.checkIn,bookEndDate:m.checkOut};a=JSON.stringify(a),h(function(){c({method:d("ajaxMethod")(),url:k("bookHotel","roomInfo"),data:a}).then(function(a,b,c,d){m.room=a.data.data.room,m.priceList=a.data.data.priceList,m.showLoadingBool.searchBool=!0,m.roomPriPerDay=m.roomBookPrcFun(m.priceList),m.roomMax=Math.min(m.room.roomRemain,m.room.purchaseAbility),j(m.showLoadingBool)},function(a,b,c,d){m.showLoadingBool.searchBool=!0,j(m.showLoadingBool),i.alert({template:b})})},500)},m.roomBookPrcFun=function(a){for(var b=a.length,c=0,d=0;d<b;d++)c+=Number(a[d].price);return c},m.modifyRoomNum=function(a){if(a<0){if(1==m.roomNumber)return;m.roomNumber-=1}else{if(m.roomNumber==m.roomMax)return;m.roomNumber+=1}},m.newOrder=function(){var a={wxappid:b.root.getParams("appid"),orderType:"Room",goodsID:m.roomId,goodsName:"酒店名称",goodsDetail:m.room.roomName,goodsExtraInfo:"钻石会员",goodsPrice:1,clientIP:"1.1.1.1",userid:1};a=JSON.stringify(a),c.post(k("neworder","","server"),a).success(function(a,b,c,e){"200"==a.rescode?m.wxPay(a.JS_Pay_API,a.orderNum):alert(d("translate")("serverError")+" "+a.rescode+" "+a.errInfo)}).error(function(a,b,c,e){alert(d("translate")("serverError")+b)})},m.wxPay=function(a,b){var b=b;console.log(a.timeStamp+", "+a.nonceStr+", "+a.package+", "+a.signType+", "+a.paySign),wx.chooseWXPay({timestamp:a.timeStamp,nonceStr:a.nonceStr,package:a.package,signType:a.signType,paySign:a.paySign,success:function(a){e.go("orderInfo",{orderId:b})},cancel:function(){e.go("orderInfo",{orderId:b})},error:function(a){e.go("orderInfo",{orderId:b})}})}}]).controller("bookbookOrderInfoController",["$scope","$http","$filter","$stateParams","$ionicPopup","$translate","loadingService","backendUrl","util",function(a,b,c,d,e,f,g,h,i){console.log("bookInfoController");var j=this;console.log(d),j.init=function(){a.root.wxShare(),j.showLoadingBool={},j.showLoadingBool.searchBool=!1,g(j.showLoadingBool),j.search()},j.search=function(){var k={action:"GetRoomOrderDetail",appid:a.root.getParams("appid"),clear_session:"xxxx",openid:a.root.getParams("openid"),lang:f.proposedLanguage()||f.use(),orderId:d.orderId};k=JSON.stringify(k),b({method:c("ajaxMethod")(),url:h("order","orderInfo"),data:k}).then(function(a,b,c,d){j.room=a.data.data.room,console.log(j.room),j.hotel=a.data.data.hotel,j.roomOrder=a.data.data.roomOrder,j.showLoadingBool.searchBool=!0,j.stayDays=i.countDay(j.hotel.bookStartDate,j.hotel.bookEndDate),g(j.showLoadingBool)},function(a,b,c,d){j.showLoadingBool.searchBool=!0,g(j.showLoadingBool),e.alert({template:b})})}}]).controller("bookRoomSoldOutController",["$http","$scope",function(a,b){var c=this;c.init=function(){b.root.wxShare()}}]).controller("memberHomeController",["$http","$scope","$filter","$stateParams","$translate","$ionicPopup","loadingService","backendUrl",function(a,b,c,d,e,f,g,h){console.log("memberHomeController");var i=this;i.init=function(){b.root.wxShare(),i.showLoadingBool={},i.showLoadingBool.searchBool=!1,g(i.showLoadingBool.searchBool),i.search()},i.search=function(){var d={action:"GetMemberInfo",appid:b.root.getParams("appid"),clear_session:"xxxx",openid:b.root.getParams("openid"),lang:e.proposedLanguage()||e.use()};d=JSON.stringify(d),a({method:c("ajaxMethod")(),url:h("member","memberInfo"),data:d}).then(function(a,b,c,d){i.member=a.data.data.member,i.showLoadingBool.searchBool=!0,g(i.showLoadingBool.searchBool)},function(a,b,c,d){i.showLoadingBool.searchBool=!0,g(i.showLoadingBool.searchBool),f.alert({template:b})})}}]).controller("memberInfoEditController",["$http","$scope","$filter","$stateParams","$timeout","$ionicPopup","$translate","loadingService","backendUrl",function(a,b,c,d,e,f,g,h,i){console.log("memberInfoEditController");var j=this;j.memberId=d.memberId,j.init=function(){b.root.wxShare(),j.showLoadingBool={},j.showLoadingBool.searchBool=!1,h(j.showLoadingBool),j.search()},j.search=function(){var d={action:"GetMemberInfo",appid:b.root.getParams("appid"),clear_session:"xxxx",openid:b.root.getParams("openid"),lang:g.proposedLanguage()||g.use()};d=JSON.stringify(d),a({method:c("ajaxMethod")(),url:i("member","memberInfo"),data:d}).then(function(a,b,c,d){console.log(a),j.member=a.data.data.member,console.log(j.member),j.showLoadingBool.searchBool=!0,h(j.showLoadingBool)},function(a,b,c,d){j.showLoadingBool.searchBool=!0,h(j.showLoadingBool),f.alert({template:b})})},j.updataMemberInfo=function(){var d={action:"modifyMemberInfo",appid:b.root.getParams("appid"),clear_session:"xxxx",openid:b.root.getParams("openid"),lang:g.proposedLanguage()||g.use(),memberInfo:{realName:j.member.realName,mobile:j.member.idCardNumber,idCardNumber:j.member.mobile}};d=JSON.stringify(d),a({method:c("ajaxMethod")(),url:i("member","memberInfo"),data:d}).then(function(a,b,c,d){h(j.showLoadingBool)},function(a,b,c,d){f.alert({template:b})})}}]).controller("memberOrderListController",["$http","$scope","$filter","$stateParams","$ionicPopup","loadingService","backendUrl",function(a,b,c,d,e,f,g){console.log("memberOrderListController");var h=this;h.init=function(){b.root.wxShare(),h.showLoadingBool={},h.showLoadingBool.searchBool=!1,f(h.showLoadingBool),h.search()},h.search=function(){a({method:c("ajaxMethod")(),url:g("member","orderList")}).then(function(a,b,c,d){console.log(a),h.orderLists=a.data.data.orderLists,h.showLoadingBool.searchBool=!0,f(h.showLoadingBool)},function(a,b,c,d){h.showLoadingBool.searchBool=!0,f(h.showLoadingBool),e.alert({template:b})})}}]).controller("shopHomeController",["$http","$scope","$filter","$stateParams","$ionicPopup","$timeout","loadingService","backendUrl",function(a,b,c,d,e,f,g,h){console.log("shopHomeController");var i=this;i.init=function(){i.showLoadingBool={},b.root.wxShare(),i.search()},i.search=function(){i.showLoadingBool.searchBool=!1,g(i.showLoadingBool),f(function(){a({method:c("ajaxMethod")(),url:h("product","productList")}).then(function(a,b,c,d){console.log(a),i.productCategory=a.data.data.productCategory,i.showLoadingBool.searchBool=!0,g(i.showLoadingBool)},function(a,b,c,d){i.showLoadingBool.searchBool=!0,g(i.showLoadingBool),e.alert({template:b})})},500)}}]).controller("shopProductDetailController",["$http","$scope","$filter","$stateParams","$ionicPopup","$timeout","loadingService","backendUrl",function(a,b,c,d,e,f,g,h){console.log("shopProductDetailController");var i=this;i.init=function(){i.showLoadingBool={},b.root.wxShare(),i.search()},i.search=function(){i.showLoadingBool.searchBool=!1,g(i.showLoadingBool),f(function(){a({method:c("ajaxMethod")(),url:h("product","productDetail")}).then(function(a,b,c,d){console.log(a),i.product=a.data.data.product,i.showLoadingBool.searchBool=!0,g(i.showLoadingBool)},function(a,b,c,d){i.showLoadingBool.searchBool=!0,g(i.showLoadingBool),e.alert({template:b})})},500)}}]).controller("shopCartController",["$http","$scope",function(a,b){console.log("shopCartController");var c=this;c.init=function(){b.root.wxShare()}}]).controller("shopOrderInfoController",["$http","$scope",function(a,b){console.log("shopOrderInfoController");var c=this;c.init=function(){b.root.wxShare()}}])}(),function(){angular.module("app.directive",[]).directive("cityPicker",function(){return{restrict:"EA",templateUrl:"pages/drt/city-picker.html",replace:!0}}).controller("cityPickerController",["$scope","$ionicScrollDelegate",function(a,b){var c=this;c.init=function(a,b){c.callback=b,c.cityLists=a},c.scrollTo=function(a){var c=document.getElementById(a).offsetTop;b.$getByHandle("cityList").scrollTo(0,c,!0)}}]).directive("travelDatePicker",function(){return{restrict:"EA",templateUrl:"pages/drt/travel-date-picker.html",replace:!0}}).controller("travelDatePickerController",["$scope","$filter",function(a,b){function c(a,b){var c=new Date(a),d=new Date(b);return c.getFullYear()===d.getFullYear()&&c.getMonth()==d.getMonth()&&c.getDate()==d.getDate()}function d(a){var a=new Date(a);return a=new Date(a.getFullYear(),a.getMonth(),a.getDate()),a.getTime()}function e(a,b){var c=new Date(a,b-1,1),d=new Date(a,b,0),e=c.getDay()+d.getDate();return Math.ceil(e/7)}function f(a,b){var c=new Date(a);return c.setTime(a+24*b*60*60*1e3),c.getTime()}function g(a){switch(a.getMonth()+1){case 1:i(a.getFullYear())?a.setTime(f(a.getTime(),29)):a.setTime(f(a.getTime(),28));break;case 3:case 5:case 8:case 10:a.setTime(f(a.getTime(),30));break;case 12:case 2:case 4:case 6:case 7:case 9:case 11:a.setTime(f(a.getTime(),31))}}function h(a){a=new Date(a);var b=a.getFullYear(),c=a.getMonth()+1;return 12*(b-1970)+c}function i(a){return a%4==0&&(a%400==0||a%100!=0)}var j=this;j.init=function(a,c,d,e,f){var g=document.createElement("style");g.innerText=".tdp-d-checkin:after{content:'"+b("translate")("checkIn")+"'}",g.innerText+=".tdp-d-checkout:after{content:'"+b("translate")("checkOut")+"'}",document.body.appendChild(g),j.st=d?d:(new Date).getTime(),j.et=e?e:j.st+158112e5,j.checkin=a,j.checkout=c,j.dates=[],j.callback=f,j.setDateData(),j.msgShow=!0,j.msg=b("translate")("plsSelACheckInDate")},j.setDateData=function(){for(var a=h(j.et)-h(j.st)+1,b=new Date(j.st),c=0;c<a;c++){j.dates[c]={},j.dates[c].month=b.getTime(),j.dates[c].weeks=[];for(var d=new Date(b.getFullYear(),b.getMonth()+1,0),i=d.getFullYear(),k=d.getMonth()+1,l=e(i,k),m=new Date(b.getFullYear(),b.getMonth(),1),n=m.getDay(),o=0;o<l;o++){j.dates[c].weeks[o]=[];for(var p=0;p<7;p++)n>0?(j.dates[c].weeks[o][p]=null,n--):m>d?j.dates[c].weeks[o][p]=null:(j.dates[c].weeks[o][p]=m.getTime(),m.setTime(new Date(f(m.getTime(),1)).getTime()))}g(b)}},j.clickDate=function(a){if(j.dDisable(a))return!1;if(j.checkin&&j.checkout)j.checkin=a,j.checkout=null,j.msgShow=!0,j.msg=b("translate")("plsSelACheckOutDate");else if(j.checkin&&!j.checkout){if(c(a,j.checkin))return;a<j.checkin?j.checkin=a:(j.checkout=a,j.msgShow=!1,j.msg="",j.callback(j.checkin,j.checkout))}else j.checkin=a},j.dDisable=function(a){var b=(new Date).getTime();return d(b)>d(a)||d(a)<d(j.st)||d(a)>d(j.et)},j.isDuring=function(a){var b=!1;return j.checkin&&j.checkout&&a>j.checkin&&a<j.checkout&&(b=!0),b},j.isCheckin=function(a){return!(!j.checkin||!c(j.checkin,a))},j.isCheckout=function(a){return!(!j.checkout||!c(j.checkout,a))}}])}(),function(){angular.module("app.services",[]).service("backendUrl",["BACKEND_CONFIG",function(a){return function(b,c,d){return a.test?"server"==d?a.serverUrl+b:a.testUrl+c+a.testExtesion:a.serverUrl+b}}]).service("loadingService",["$ionicLoading",function(a){return function(b){var c=0,d=0;for(var e in b)++c,1==b[e]&&++d;c==d?a.hide():a.show({template:"Loading..."})}}]).factory("util",function(){function a(a){var a=a-0,a=new Date(a);return a=new Date(a.getFullYear(),a.getMonth(),a.getDate()),a.getTime()}return{countDay:function(b,c){return(a(c)-a(b))/864e5}}})}(),function(){angular.module("app.filters",[]).filter("ajaxMethod",["BACKEND_CONFIG",function(a){return function(){var b=a.test?"GET":"POST";return b}}])}();