/*! m-ov | cc | ISC */
"use strict";!function(){var a=angular.module("app.controllers",["ngCookies"]);a.controller("RootController",["$scope","$ionicModal",function(a,b){var c=this;c.init=function(){},b.fromTemplateUrl("pages/mainMenu.html",{scope:a,animation:"slide-in-left"}).then(function(b){a.modal=b}),c.showMainMenu=function(){a.modal.show()}}]).controller("bookHotelSearchController",["$scope","$location","$http",function(a,b,c){var d=this;d.init=function(){d.datePickerShow=!1},d.showDP=function(a){d.datePickerShow=!!a&&a}}]).controller("bookHotelListController",["$scope","$location","$http","$stateParams","backendUrl",function(a,b,c,d,e){var f=this;console.log(d.sDate+", "+d.eDate),f.init=function(){f.datePickerShow=!1,f.hotels={},f.checkin=1475097892e3,f.checkout=14777568e5,f.search()},f.showDP=function(a){f.datePickerShow=!!a&&a},f.doAfterPickerDates=function(a,b){f.checkin=a,f.checkout=b,f.showDP(!1)},f.search=function(){c.get(e("hotels")).success(function(a,b,c,d){f.hotels=a}).error(function(a,b,c,d){alert(b)})}}]).controller("userOrderController",["$scope","$ionicModal",function(a,b){var c=this;c.init=function(){},b.fromTemplateUrl("pages/mainMenu.html",{scope:a,animation:"slide-in-left"}).then(function(b){a.modal=b}),c.showMainMenu=function(){a.modal.show()}}])}(),function(){angular.module("m-ov",["ionic","ui.router","app.filters","app.controllers","app.directive","app.services","pascalprecht.translate"]).config(["$translateProvider",function(a){var b="zh-CN"==navigator.language?navigator.language:"en-US";a.preferredLanguage(b),a.useStaticFilesLoader({prefix:"i18n/",suffix:".json"})}]).config(["$stateProvider","$urlRouterProvider",function(a,b){b.otherwise("/index"),a.state("index",{url:"/index",templateUrl:"pages/bookHotelList.html"}).state("bookHotelSearch",{url:"/bookHotelSearch",views:{"":{templateUrl:"pages/bookHotelSearch.html"}}}).state("bookHotelList",{url:"/bookHotelList:?sDate&eDate",views:{"":{templateUrl:"pages/bookHotelList.html"}}}).state("userOrder",{url:"/userOrder",views:{"":{templateUrl:"pages/userOrder.html"}}})}]).constant("BACKEND_CONFIG",{baseUrl:"/m-ov/src/api/",extesion:".json"})}(),function(){angular.module("app.directive",[]).directive("travelDatePicker",function(){return{restrict:"EA",templateUrl:"pages/drt/travel-date-picker.html",replace:!0}}).controller("travelDatePickerController",["$scope",function(a){function b(a,b){var c=new Date(a),d=new Date(b);return c.getFullYear()===d.getFullYear()&&c.getMonth()==d.getMonth()&&c.getDate()==d.getDate()}function c(a){var a=new Date(a);return a=new Date(a.getFullYear(),a.getMonth(),a.getDate()),a.getTime()}function d(a,b){var c=new Date(a,b-1,1),d=new Date(a,b,0),e=c.getDay()+d.getDate();return Math.ceil(e/7)}function e(a,b){var c=new Date(a);return c.setTime(a+24*b*60*60*1e3),c.getTime()}function f(a){switch(a.getMonth()+1){case 1:h(a.getFullYear())?a.setTime(e(a.getTime(),29)):a.setTime(e(a.getTime(),28));break;case 3:case 5:case 8:case 10:a.setTime(e(a.getTime(),30));break;case 12:case 2:case 4:case 6:case 7:case 9:case 11:a.setTime(e(a.getTime(),31))}}function g(a){a=new Date(a);var b=a.getFullYear(),c=a.getMonth()+1;return 12*(b-1970)+c}function h(a){return a%4==0&&(a%400==0||a%100!=0)}var i=this;i.init=function(a,b,c,h,j){i.st=c?c:(new Date).getTime(),i.et=h?h:i.st+158112e5,i.checkin=a,i.checkout=b,i.dates=[],i.callback=j;for(var k=g(i.et)-g(i.st)+1,c=new Date(i.st),l=0;l<k;l++){i.dates[l]={},i.dates[l].month=c.getTime(),i.dates[l].weeks=[];for(var m=new Date(c.getFullYear(),c.getMonth()+1,0),n=m.getFullYear(),o=m.getMonth()+1,p=d(n,o),q=new Date(c.getFullYear(),c.getMonth(),1),r=q.getDay(),s=0;s<p;s++){i.dates[l].weeks[s]=[];for(var t=0;t<7;t++)r>0?(i.dates[l].weeks[s][t]=null,r--):q>m?i.dates[l].weeks[s][t]=null:(i.dates[l].weeks[s][t]=q.getTime(),q.setTime(new Date(e(q.getTime(),1)).getTime()))}f(c)}},i.clickDate=function(a){return!(i.dDisable(a)||b(a,i.checkin)||b(a,i.checkout))&&void(i.checkin&&i.checkout?(i.checkin=a,i.checkout=null):i.checkin&&!i.checkout?a<i.checkin?i.checkin=a:(i.checkout=a,i.callback(i.checkin,i.checkout)):i.checkin=a)},i.dDisable=function(a){var b=(new Date).getTime();return c(b)>c(a)||c(a)<c(i.st)||c(a)>c(i.et)},i.isCheckin=function(a){return!(!i.checkin||!b(i.checkin,a))},i.isCheckout=function(a){return!(!i.checkout||!b(i.checkout,a))}}])}(),function(){angular.module("app.services",[]).service("backendUrl",["BACKEND_CONFIG",function(a){return function(b){return a.baseUrl+b+a.extesion}}])}(),function(){angular.module("app.filters",[]).filter("xx",["",function(){return function(a){return a}}])}();